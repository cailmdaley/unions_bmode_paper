# UNIONS B-mode Validation Paper Figures

This directory contains symlinks to figures generated by the pure E/B analysis pipeline.
The symlinks automatically update when the analysis is re-run with `snakemake bmodes_all`.

## Figure Naming Convention

All figures are symlinked from:
`/n17data/cdaley/unions/pure_eb/code/sp_validation/notebooks/cosmo_val/output/`

## Pure E/B Mode Figures

### Correlation Function Plots (Figure 1 in paper)
- `eb_v145_leak_corr.png` → SP_v1.4.5 leakage-corrected E/B modes
- `eb_v146_leak_corr.png` → SP_v1.4.6 leakage-corrected E/B modes
- `eb_v148_leak_corr.png` → SP_v1.4.8 leakage-corrected E/B modes

Source files follow pattern:
`{version}_eb_minsep=1.0_maxsep=250.0_nbins=20_minsepint=0.5_maxsepint=500.0_nbinsint=1000_npatch=1_varmethod=semi-analytic_xis.png`

### PTE Heatmaps (Figure 2 in paper)
- `pte_v145_leak_corr.png` → SP_v1.4.5 PTE heatmaps
- `pte_v146_leak_corr.png` → SP_v1.4.6 PTE heatmaps
- `pte_v148_leak_corr.png` → SP_v1.4.8 PTE heatmaps

Source files follow pattern:
`{version}_eb_minsep=1.0_maxsep=250.0_nbins=20_minsepint=0.5_maxsepint=500.0_nbinsint=1000_npatch=1_varmethod=semi-analytic_ptes.png`

### Covariance Matrix (Figure 3 in paper)
- `eb_covariance.png` → SP_v1.4.5 leakage-corrected pure E/B covariance

Source file:
`SP_v1.4.5_leak_corr_eb_minsep=1.0_maxsep=250.0_nbins=20_minsepint=0.5_maxsepint=500.0_nbinsint=1000_npatch=1_varmethod=semi-analytic_covariance.png`

## COSEBI Figures

### COSEBI Mode Plots (Figure 4 in paper)
- `cosebis_v145_leak_corr.png` → SP_v1.4.5 COSEBI E/B modes
- `cosebis_v146_leak_corr.png` → SP_v1.4.6 COSEBI E/B modes
- `cosebis_v148_leak_corr.png` → SP_v1.4.8 COSEBI E/B modes

Source files follow pattern:
`{version}_cosebis_minsep=0.5_maxsep=500.0_nbins=1000_npatch=1_varmethod=analytic_nmodes=6_scalecut=5-144_cosebis.png`

### COSEBI Covariance Matrix (Figure 5 in paper)
- `cosebis_covariance.png` → SP_v1.4.5 leakage-corrected COSEBI covariance

Source file:
`SP_v1.4.5_leak_corr_cosebis_minsep=0.5_maxsep=500.0_nbins=1000_npatch=1_varmethod=analytic_nmodes=6_scalecut=5-144_covariance.png`

## Regenerating Figures

To regenerate all figures and automatically update the paper:

```bash
cd /n17data/cdaley/unions/pure_eb
snakemake --profile slurm -j10 bmodes_all
```

This will regenerate plots for all catalog versions specified in `config.yaml` under `versions`.

## Configuration Parameters

Figures are generated using fiducial parameters from `config.yaml`:
- Reporting binning: 20 bins, [1, 250] arcmin
- Integration binning: 1000 bins, [0.5, 500] arcmin
- COSEBI modes: 6 modes (fiducial), 20 modes (full analysis)
- COSEBI scale range: [5, 144] arcmin
- Covariance: Semi-analytical (Pure E/B), Analytic (COSEBI)
- n_samples: 2000 Monte Carlo realizations for covariance propagation
